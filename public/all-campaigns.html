<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>All Campaigns || adzduniya</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonts + Bootstrap -->
  <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <!-- DataTables -->
  <link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">

  <style>
    body{font-family:'Public Sans',sans-serif;background:#f4f6fb}
    .sidebar{width:260px;position:fixed;top:0;bottom:0;left:0;background:#111827;color:#fff;padding:20px}
    .sidebar a{color:#cbd5e1;text-decoration:none;display:block;padding:10px;border-radius:8px}
    .sidebar a.active,.sidebar a:hover{background:#1f2937;color:#fff}
    .content{margin-left:260px;padding:25px}
    .topbar{background:#fff;padding:12px 20px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.05)}
    .card-box{border-radius:14px;box-shadow:0 4px 12px rgba(0,0,0,.06)}
  </style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <h4 class="mb-4">adzduniya</h4>
  <a href="/admin"><i class="bi bi-speedometer2"></i> Dashboard</a>
  <a class="active" href="/all-campaigns"><i class="bi bi-megaphone"></i> Campaigns</a>
  <a href="#"><i class="bi bi-gift"></i> Cashback Offers</a>
  <a href="#"><i class="bi bi-bar-chart"></i> Reports</a>
  <a href="#"><i class="bi bi-wallet2"></i> Wallet</a>
  <a href="/logout"><i class="bi bi-power"></i> Logout</a>
</div>

<!-- Content -->
<div class="content">

  <div class="topbar d-flex justify-content-between align-items-center mb-4">
    <h5 class="mb-0">All Campaigns</h5>
    <span class="text-muted">adzduniya panel</span>
  </div>

  <div class="card card-box p-3">
    <table id="offersTable" class="table table-striped" style="width:100%">
      <thead>
        <tr>
          <th>#</th>
          <th>Offer Name</th>
          <th>Affiliate URL</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

</div>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

<script>
$(async function(){
  const res = await fetch('/api/offers');
  const data = await res.json();

  let rows = '';
  data.forEach((o,i)=>{
    rows += `<tr>
      <td>${i+1}</td>
      <td>${o.name}</td>
      <td><small>${o.url}</small></td>
      <td><a class="btn btn-sm btn-primary" target="_blank" href="/${o.name}">Open</a></td>
    </tr>`;
  });

  $('#offersTable tbody').html(rows);
  $('#offersTable').DataTable();
});
</script>

</body>
</html>